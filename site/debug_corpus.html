<html><head><meta charset='UTF-8'><title>Debug Corpus</title></head><body><h1>Debug Génération Corpus</h1><style>body{font-family:monospace;} .error{color:red;} .success{color:green;} .info{color:blue;}</style><p class='success'>✓ Fichier CSV trouvé : /home/runner/work/merveilles17/merveilles17/index/corpus.csv</p><h2>En-têtes CSV (ligne 1)</h2><pre>Array
(
    [0] => code
    [1] => titre
    [2] => description
    [3] => sql_where
)
</pre><p>Nombre de colonnes : 4</p><hr><h2>Corpus : Les divertissements de la cour en 1664</h2><p><strong>Code:</strong> 'div1664'</p><p><strong>Description:</strong> Tous les divertissements de la cour en 1664</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE start LIKE &#039;1664%&#039;))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE start LIKE &#039;1664%&#039;))</pre><p class='success'><strong>✓ 63 documents trouvés</strong></p><p>Exemples (5 premiers) :</p><ul><li>merveilles17_img_ano13238_015</li><li>merveilles17_img_ano13238_068</li><li>merveilles17_img_ano13239_057</li><li>merveilles17_img_ano13239_081</li><li>merveilles17_img_ano13241_077</li></ul><hr><h2>Corpus : Les fêtes de Versailles</h2><p><strong>Code:</strong> 'versailles'</p><p><strong>Description:</strong> Les divertissements de la cour à Versailles</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM lieu_document WHERE lieu IN (SELECT id FROM lieu WHERE path LIKE &#039;/france/versailles%&#039;))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM lieu_document WHERE lieu IN (SELECT id FROM lieu WHERE path LIKE &#039;/france/versailles%&#039;))</pre><p class='error'><strong>❌ 0 documents trouvés</strong></p><h3>Tests de diagnostic :</h3><p>Total documents en base : 96</p><p class='error'>Erreur test sous-requête : SQLSTATE[HY000]: General error: 1 incomplete input</p><hr><h2>Corpus : Les ballets à la cour</h2><p><strong>Code:</strong> 'ballets'</p><p><strong>Description:</strong> Sélection de ballets et de comédies-ballets dansées à la cour</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE label LIKE &#039;%ballet%&#039; COLLATE NOCASE))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE label LIKE &#039;%ballet%&#039; COLLATE NOCASE))</pre><p class='success'><strong>✓ 9 documents trouvés</strong></p><p>Exemples (5 premiers) :</p><ul><li>merveilles17_imp_amoursdballard1664</li><li>merveilles17_imp_artsballard1663</li><li>merveilles17_imp_gazette16640216</li><li>merveilles17_imp_loret16640202</li><li>merveilles17_imp_loret16640216</li></ul><hr><h2>Corpus : Les livres de fêtes de l'Imprimerie royale</h2><p><strong>Code:</strong> 'improyale'</p><p><strong>Description:</strong> Les fêtes dans la coll. du Cabinet du Roi</p><p><strong>SQL WHERE:</strong><br><code>publine LIKE &#039;%Imprimerie royale%&#039;</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE publine LIKE &#039;%Imprimerie royale%&#039;</pre><p class='success'><strong>✓ 3 documents trouvés</strong></p><p>Exemples (5 premiers) :</p><ul><li>merveilles17_imp_ctb-perrault1670</li><li>merveilles17_imp_dv-felibien1676</li><li>merveilles17_imp_pie-ir1673</li></ul><hr><h2>Corpus : Voyages de Louis XIV dans les Flandres</h2><p><strong>Code:</strong> 'flandres17'</p><p><strong>Description:</strong> Publications entourant les entrées et fêtes dans les Flandres</p><p><strong>SQL WHERE:</strong><br><code>code LIKE &#039;%flandres17%&#039; COLLATE NOCASE</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code LIKE &#039;%flandres17%&#039; COLLATE NOCASE</pre><p class='success'><strong>✓ 15 documents trouvés</strong></p><p>Exemples (5 premiers) :</p><ul><li>Flandres17_imp_Lille1680</li><li>Flandres17_imp_Valenciennes1680</li><li>Flandres17_imp_Valenciennes1680_Mercure</li><li>Flandres17_imp_Valenciennes1680_abrege</li><li>Flandres17_imp_lettres_historiques1670</li></ul><hr><h2>Corpus : Villers-Cotterêts</h2><p><strong>Code:</strong> 'antilope'</p><p><strong>Description:</strong> Publications entourant la fête célébrant le sacre de Louis XV</p><p><strong>SQL WHERE:</strong><br><code>code LIKE &#039;%antilope%&#039; COLLATE NOCASE</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code LIKE &#039;%antilope%&#039; COLLATE NOCASE</pre><p class='success'><strong>✓ 4 documents trouvés</strong></p><p>Exemples (5 premiers) :</p><ul><li>Antilope_imp_gazette17221121</li><li>Antilope_imp_gazette17221201</li><li>Antilope_imp_mercure17221101</li><li>Antilope_imp_mercure17221201</li></ul><hr><h2>Résultat final</h2><table border='1' cellpadding='5'><tr><th>Code</th><th>Titre</th><th>Documents</th></tr><tr class='success'><td>ballets</td><td>Les ballets à la cour</td><td><strong>9</strong></td></tr><tr class='success'><td>div1664</td><td>Les divertissements de la cour en 1664</td><td><strong>63</strong></td></tr><tr class='error'><td>versailles</td><td>Les fêtes de Versailles</td><td><strong>0</strong></td></tr><tr class='success'><td>improyale</td><td>Les livres de fêtes de l'Imprimerie royale</td><td><strong>3</strong></td></tr><tr class='success'><td>antilope</td><td>Villers-Cotterêts</td><td><strong>4</strong></td></tr><tr class='success'><td>flandres17</td><td>Voyages de Louis XIV dans les Flandres</td><td><strong>15</strong></td></tr></table></body></html>