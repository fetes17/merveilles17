<html><head><meta charset='UTF-8'><title>Debug Corpus</title></head><body><h1>Debug Génération Corpus</h1><style>body{font-family:monospace;} .error{color:red;} .success{color:green;} .info{color:blue;}</style><p class='success'>✓ Fichier CSV trouvé : /home/runner/work/merveilles17/merveilles17/index/corpus.csv</p><h2>En-têtes CSV (ligne 1)</h2><pre>Array
(
    [0] => code
    [1] => titre
    [2] => description
    [3] => sql_where
)
</pre><p>Nombre de colonnes : 4</p><hr><h2>Corpus : Les divertissements de la cour en 1664</h2><p><strong>Code:</strong> 'div1664'</p><p><strong>Description:</strong> Tous les divertissements de la cour en 1664</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE start LIKE '1664%'))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE start LIKE &#039;1664%&#039;))</pre><p class='error'><strong>❌ Erreur SQL :</strong> SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: corpus_document.corpus</p><hr><h2>Corpus : Les fêtes de Versailles</h2><p><strong>Code:</strong> 'versailles'</p><p><strong>Description:</strong> Les divertissements de la cour à Versailles</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM lieu_document WHERE lieu IN (SELECT id FROM lieu WHERE path LIKE '/france/ile-de-france/versailles%'))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM lieu_document WHERE lieu IN (SELECT id FROM lieu WHERE path LIKE &#039;/france/ile-de-france/versailles%&#039;))</pre><p class='error'><strong>❌ 0 documents trouvés</strong></p><h3>Tests de diagnostic :</h3><p>Total documents en base : 96</p><p>Sous-requête retourne 0 résultats</p><hr><h2>Corpus : Les ballets à la cour</h2><p><strong>Code:</strong> 'ballets'</p><p><strong>Description:</strong> Sélection de ballets et de comédies-ballets dansées à la cour</p><p><strong>SQL WHERE:</strong><br><code>code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE label LIKE '%ballet%' COLLATE NOCASE))</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code IN (SELECT document_code FROM chrono_document WHERE chrono IN (SELECT id FROM chrono WHERE label LIKE &#039;%ballet%&#039; COLLATE NOCASE))</pre><p class='error'><strong>❌ Erreur SQL :</strong> SQLSTATE[HY000]: General error: 21 bad parameter or other API misuse</p><hr><h2>Corpus : Les livres de fêtes de l'Imprimerie royale</h2><p><strong>Code:</strong> 'improyale'</p><p><strong>Description:</strong> Les fêtes dans la collection du Cabinet du Roi</p><p><strong>SQL WHERE:</strong><br><code>publine LIKE '%Imprimerie royale%'</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE publine LIKE &#039;%Imprimerie royale%&#039;</pre><p class='error'><strong>❌ Erreur SQL :</strong> SQLSTATE[HY000]: General error: 21 bad parameter or other API misuse</p><hr><h2>Corpus : Voyages de Louis XIV dans les Flandres</h2><p><strong>Code:</strong> 'flandres17'</p><p><strong>Description:</strong> Publications entourant les entrées et fêtes dans les Flandres</p><p><strong>SQL WHERE:</strong><br><code>code LIKE '%flandres17%' COLLATE NOCASE</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code LIKE &#039;%flandres17%&#039; COLLATE NOCASE</pre><p class='error'><strong>❌ Erreur SQL :</strong> SQLSTATE[HY000]: General error: 21 bad parameter or other API misuse</p><hr><h2>Corpus : Villers-Cotterêts</h2><p><strong>Code:</strong> 'antilope'</p><p><strong>Description:</strong> Publications entourant la fête célébrant le sacre de Louis XV</p><p><strong>SQL WHERE:</strong><br><code>code LIKE '%antilope%' COLLATE NOCASE</code></p><p><strong>Requête SQL complète:</strong></p><pre>SELECT code FROM document WHERE code LIKE &#039;%antilope%&#039; COLLATE NOCASE</pre><p class='error'><strong>❌ Erreur SQL :</strong> SQLSTATE[HY000]: General error: 21 bad parameter or other API misuse</p><hr><h2>Résultat final</h2><table border='1' cellpadding='5'><tr><th>Code</th><th>Titre</th><th>Documents</th></tr><tr class='error'><td>ballets</td><td>Les ballets à la cour</td><td><strong>0</strong></td></tr><tr class='error'><td>div1664</td><td>Les divertissements de la cour en 1664</td><td><strong>0</strong></td></tr><tr class='error'><td>versailles</td><td>Les fêtes de Versailles</td><td><strong>0</strong></td></tr><tr class='error'><td>improyale</td><td>Les livres de fêtes de l'Imprimerie royale</td><td><strong>0</strong></td></tr><tr class='error'><td>antilope</td><td>Villers-Cotterêts</td><td><strong>0</strong></td></tr><tr class='error'><td>flandres17</td><td>Voyages de Louis XIV dans les Flandres</td><td><strong>0</strong></td></tr></table></body></html>